# JUnit源码分析

## 一、概述

​     最近自己的项目在跑单元测试的时候总是失败，可是我没改过错误单元测试相应模块的代码啊，按理说不应该失败才对，但事实就是确实是各种各样的问题，而且代码覆盖率是越来越低，跑一次单元测试竟然要100多分钟，将近两个小时，于是我狠下心来决定深入的研究下单元测试，并且来分析下目前架构体系下单元测试的痛点。

 #### 1、 单元测试依赖数据库等

DAO层单元测试直连测试库，由于测试库的数据可以被任意修改，从而导致测试依赖的数据被更改，单元测试不通过，另外开发在编写单元测试时，没有清理意识，导致测试库大量垃圾数据。

#### 2、 单元测试结果校验缺失

​     单元测试里鱼目混珠，大量的System.out.printf相关的代码

#### 3、单元测试基于spring

​    单元测试基于spring的，目前的单元测试数据乱，差，各种不同的人写出不同的单元测试，要来来回回启动容器很多次，导致单元测试慢，加上大批量的数据插入，准备项目启动数据等等，是更加的慢

#### 4、依赖中间件服务

​    目前的单元测试基于自研的RPC中间件等工具，无法mock，严重时需要依赖别人的服务跑单元测试，如果别人的数据更改，单元测试错误，那么束手无策。

当然还有很多痛点，我这里就不一一列举了，总的来说，单元测试还是很重要的，但是以上的痛点，让开发人员不愿意去写单元测试，当项目发布时又不得不去跑，各种错误，难上加难！



鉴于以上的问题，我决定深入junit，研究下如何更好的写单元测试，如果更好的扩展junit

## 二、JUnit深入了解

   如果我让你来说，JUnit是一个怎么样的工具的时候，恐怕你真说不上来，能答上来的估计就只有@BeforeClass、@AfterClass、@Before、@After、@Test、@Ignore了吧。和我一样，我恐怕也只知道这些，也只用过这些了，但对于其他的东西，我一无所知，可能你比我知道的还多一点吧。

### 1、JUnitCore















